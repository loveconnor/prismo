<div class="flex flex-wrap items-center gap-3 py-4">
  <!-- Search Box -->
  <div class="relative min-w-[240px] flex-1 max-w-[400px]">
    <app-input
      type="text"
      placeholder="Search labs..."
      id="searchInput"
      [attr.aria-label]="'Search labs'"
      [(ngModel)]="searchQuery"
      (ngModelChange)="onSearchChange($event)">
    </app-input>
    <svg
      class="absolute right-3 top-1/2 -translate-y-1/2 text-[#9ca3af] pointer-events-none"
      width="18"
      height="18"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    >
      <circle cx="11" cy="11" r="8"></circle>
      <path d="m21 21-4.35-4.35"></path>
    </svg>
  </div>

  <!-- Filter Tabs -->
  <div class="flex h-10 items-center gap-1 rounded-[10px] border px-1" role="tablist" aria-label="Lab filters">
    <app-button
      *ngFor="let option of filterTabs; trackBy: trackByFilterIndex"
      type="button"
      [variant]="filter === option.value ? 'default' : 'ghost'"
      [className]="getFilterButtonClasses(option.value)"
      size="sm"
      [attr.role]="'tab'"
      [attr.data-filter]="option.value"
      [attr.aria-selected]="filter === option.value"
      (click)="onFilterChange(option.value)"
    >
      {{ option.label }}
    </app-button>
  </div>

  <!-- Sort Dropdown -->
  <div class="relative">
    <app-dropdown-menu [align]="'end'" [side]="'bottom'" [className]="'min-w-[12rem]'">
      <button
        slot="trigger"
        type="button"
        class="flex h-10 min-w-[160px] items-center justify-between gap-2 rounded-md border border-border bg-background px-3 text-sm font-medium text-foreground shadow-sm transition-colors hover:bg-accent hover:text-accent-foreground"
      >
        <span>{{ getSortLabel(sortBy) }}</span>
        <ng-icon name="lucide-chevron-down" class="h-4 w-4 opacity-60"></ng-icon>
      </button>
      <div slot="content" class="w-[12rem] space-y-1">
        <button
          *ngFor="let option of sortOptions; trackBy: trackBySortValue"
          type="button"
          role="menuitem"
          class="flex w-full items-center justify-between rounded-md px-3 py-2 text-sm text-foreground hover:bg-accent hover:text-accent-foreground"
          [attr.aria-checked]="sortBy === option.value"
          (click)="onSortChange(option.value)"
        >
          <span>{{ option.label }}</span>
          <ng-icon
            *ngIf="sortBy === option.value"
            name="lucide-check"
            class="h-4 w-4 text-blue-500"
          ></ng-icon>
        </button>
      </div>
    </app-dropdown-menu>
  </div>

  <!-- Clear Filters -->
  <app-button
    *ngIf="shouldShowClear"
    type="button"
    variant="ghost"
    (click)="onClearFilters()"
    [className]="'flex h-10 items-center gap-2 px-2 text-sm'"
  >
    <ng-icon name="lucide-x" class="h-4 w-4"></ng-icon>
    Clear filters
  </app-button>
</div>
