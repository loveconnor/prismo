<app-dropdown-menu
  [align]="dropdownAlign"
  [side]="dropdownSide"
  [sideOffset]="8"
  [className]="dropdownClasses"
  (openChange)="onOpenChange($event)"
>
  <button
    slot="trigger"
    type="button"
    [class]="triggerClasses"
    [attr.aria-label]="triggerAriaLabel"
    aria-haspopup="menu"
    [attr.aria-expanded]="menuOpen"
  >
    <app-avatar
      [src]="triggerAvatarSrc || '/placeholder.svg'"
      [alt]="user.name"
      [fallback]="initials"
      [className]="avatarClasses"
      size="sm"
      data-slot="avatar"
    ></app-avatar>
    @if (variant === 'sidebar') {
      <div [class]="userInfoClasses">
        <span [class]="nameClasses">{{ user.name }}</span>
        <span [class]="emailClasses">{{ user.email }}</span>
      </div>
      <svg 
        [class]="chevronClasses"
        fill="none" 
        stroke="currentColor" 
        viewBox="0 0 24 24"
      >
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
      </svg>
    }
  </button>

  <div slot="content" [class]="contentClasses">
    <div [class]="headerCardClasses">
      <div class="flex items-center gap-3">
        <app-avatar
          [src]="user.avatarUrl || '/placeholder.svg'"
          [alt]="user.name"
          [fallback]="initials"
          [className]="headerAvatarClasses"
          size="md"
        ></app-avatar>
        <div class="min-w-0 flex-1">
          <p [class]="nameTextClasses">{{ user.name }}</p>
          <p [class]="emailTextClasses">{{ user.email }}</p>
        </div>
      </div>
      <div class="mt-2.5">
        <span [class]="badgeClasses">
          {{ user.role }}
        </span>
      </div>
    </div>

    <div [class]="dividerClasses"></div>

    <button
      type="button"
      role="menuitem"
      [class]="menuItemClasses"
      (click)="openProfile()"
    >
      <ng-icon name="lucide-user" class="h-4 w-4"></ng-icon>
      <span>Profile</span>
    </button>

    <!-- <div [class]="dividerClasses"></div> -->

    <!-- <div
      [class]="themeToggleClasses"
      data-dropdown-dismiss="false"
    > -->
      <!-- <div class="flex items-center gap-2"> -->
        <!-- <ng-icon [name]="isDarkMode ? 'lucide-moon' : 'lucide-sun'" class="h-4 w-4"></ng-icon> -->
        <!-- <span>Dark mode</span> -->
      <!-- </div> -->
      <!-- <app-switch
        [(ngModel)]="isDarkMode"
        (ngModelChange)="handleThemeToggle($event)"
        className="data-[state=checked]:bg-[#BC78F9]"
      ></app-switch> -->
    <!-- </div> -->

    <div [class]="dividerClasses"></div>

    <button
      type="button"
      role="menuitem"
      [class]="signOutButtonClasses"
      (click)="handleLogout()"
    >
      <ng-icon name="lucide-log-out" class="h-4 w-4"></ng-icon>
      <span>Sign Out</span>
    </button>
  </div>
</app-dropdown-menu>
